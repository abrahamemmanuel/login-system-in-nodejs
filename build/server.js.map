{"version":3,"sources":["../src/server.js"],"names":["app","require","passport","use","express","static","path","join","__dirname","set","urlencoded","extended","secret","resave","saveUninitialized","initialize","session","req","res","next","locals","success_msg","flash","error_msg","error","router","db","process","env","MONGODB_URI","key","LOCALDB_URI","mongoose","connect","useNewUrlParser","then","console","log","catch","err","module","parent","listen"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,IAAMA,GAAG,GAAG,uBAAZ,C,CAEA;;AACAC,OAAO,CAAC,mBAAD,CAAP,CAA6BC,iBAA7B,E,CAEA;;;AACAF,GAAG,CAACG,GAAJ,CAAQC,iBAAQC,MAAR,CAAeC,cAAKC,IAAL,CAAUC,SAAV,EAAqB,WAArB,CAAf,CAAR;AACAR,GAAG,CAACG,GAAJ,CAAQ,MAAR,EAAgBC,iBAAQC,MAAR,CAAeC,cAAKC,IAAL,CAAUC,SAAV,EAAqB,YAArB,CAAf,CAAhB,E,CACA;;AACAR,GAAG,CAACS,GAAJ,CAAQ,OAAR,EAAiB,SAAjB;AACAT,GAAG,CAACS,GAAJ,CAAQ,aAAR,EAAuB,KAAvB,E,CAEA;AACA;AACA;AAIA;;AACAT,GAAG,CAACG,GAAJ,CAAQC,iBAAQM,UAAR,CAAmB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAnB,CAAR,E,CAEA;;AACAX,GAAG,CAACG,GAAJ,CACI,6BAAQ;AACNS,EAAAA,MAAM,EAAE,QADF;AAENC,EAAAA,MAAM,EAAE,IAFF;AAGNC,EAAAA,iBAAiB,EAAE;AAHb,CAAR,CADJ,E,CAQA;;AACAd,GAAG,CAACG,GAAJ,CAAQD,kBAASa,UAAT,EAAR;AACAf,GAAG,CAACG,GAAJ,CAAQD,kBAASc,OAAT,EAAR,E,CAEA;;AACAhB,GAAG,CAACG,GAAJ,CAAQ,4BAAR,E,CAEA;;AACAH,GAAG,CAACG,GAAJ,CAAQ,UAACc,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC1BD,EAAAA,GAAG,CAACE,MAAJ,CAAWC,WAAX,GAAyBJ,GAAG,CAACK,KAAJ,CAAU,aAAV,CAAzB;AACAJ,EAAAA,GAAG,CAACE,MAAJ,CAAWG,SAAX,GAAuBN,GAAG,CAACK,KAAJ,CAAU,WAAV,CAAvB;AACAJ,EAAAA,GAAG,CAACE,MAAJ,CAAWI,KAAX,GAAmBP,GAAG,CAACK,KAAJ,CAAU,OAAV,CAAnB;AACAH,EAAAA,IAAI;AACL,CALD,E,CAOA;;AACAnB,GAAG,CAACG,GAAJ,CAAQsB,cAAR,E,CAEA;;AACA,IAAMC,EAAE,GAAGC,OAAO,CAACC,GAAR,CAAYC,WAAZ,IAA2BC,cAAIC,WAA1C,C,CAEA;;AACAC,kBAASC,OAAT,CAAiBP,EAAjB,EAAqB;AAAEQ,EAAAA,eAAe,EAAE;AAAnB,CAArB,EAAgDC,IAAhD,CAAqD;AAAA,SAAMC,OAAO,CAACC,GAAR,CAAY,sBAAZ,CAAN;AAAA,CAArD,EAAgGC,KAAhG,CAAsG,UAAAC,GAAG;AAAA,SAAIH,OAAO,CAACC,GAAR,CAAYE,GAAZ,CAAJ;AAAA,CAAzG;;AAGA,IAAI,CAACC,MAAM,CAACC,MAAZ,EAAoB;AAAEzC,EAAAA,GAAG,CAAC0C,MAAJ,CAAWZ,cAAIF,GAAf,EAAoB;AAAA,WAAMQ,OAAO,CAACC,GAAR,kCAAsCP,cAAIF,GAA1C,EAAN;AAAA,GAApB;AAA8E,C,CAAA;AAEpG;;;eAEe5B,G","sourcesContent":["import express from 'express';\nimport passport from 'passport'\nimport expressLayouts from 'express-ejs-layouts';\nimport flash from 'connect-flash';\nimport session from 'express-session';\nimport mongoose from 'mongoose';\nimport key from './config/keys';\nimport router from './routes/index';\nimport path from 'path';\n\nconst app = express();\n\n// Passport Config\nrequire('./config/passport')(passport);\n\n//Static folder\napp.use(express.static(path.join(__dirname, './public/')));\napp.use('/css', express.static(path.join(__dirname, 'public/css')));\n//Set View Engine\napp.set('views', './views');\napp.set('view engine', 'ejs');\n\n// // EJS\n// app.use(expressLayouts);\n// app.set('view engine', 'ejs');\n\n\n\n// Bodyparser\napp.use(express.urlencoded({ extended: true }));\n\n// Express session\napp.use(\n    session({\n      secret: 'secret',\n      resave: true,\n      saveUninitialized: true\n    })\n  );\n\n//Passport middleware\napp.use(passport.initialize());\napp.use(passport.session());\n\n// Connect flashhero\napp.use(flash());\n\n// Global Vars\napp.use((req, res, next) => {\n  res.locals.success_msg = req.flash('success_msg');\n  res.locals.error_msg = req.flash('error_msg');\n  res.locals.error = req.flash('error');\n  next();\n});\n\n// Routes\napp.use(router);\n\n// DB Config\nconst db = process.env.MONGODB_URI || key.LOCALDB_URI;\n\n// Connect to MongoDB\nmongoose.connect(db, { useNewUrlParser: true }).then(() => console.log('MongoDB Connected...')).catch(err => console.log(err));\n\n\nif (!module.parent) { app.listen(key.env, () => console.log(`Server running on port ${key.env}`)); }// eslint-disable-line no-console\n\n// app.listen(key.env, () => {console.log(`Server running on port ${key.env}`)});\n\nexport default app;\n"],"file":"server.js"}